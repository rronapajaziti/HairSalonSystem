"use strict";(self.webpackChunktailadmin_react_free=self.webpackChunktailadmin_react_free||[]).push([[514],{514:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var r=a(43),s=a(213),d=a(579);const l=e=>{let{searchQuery:t}=e;const[a,l]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0);(0,r.useEffect)((()=>{n()}),[]);const n=async()=>{o(!0);try{const e=(await s.A.get("https://api.studio-linda.com/api/Appointment")).data,t=new Map;await Promise.all(e.map((async e=>{const{firstName:a,lastName:r,phoneNumber:d,email:l}=e.client,i=l;if(!t.has(i))try{var o;const n=(null===(o=(await s.A.get(`https://api.studio-linda.com/api/appointment/completed-appointments-client?firstName=${a}&lastName=${r}&phoneNumber=${d}&email=${l}`)).data)||void 0===o?void 0:o.completedAppointments)||0;t.set(i,{...e.client,completedAppointments:n})}catch(n){console.error(`Error fetching completed appointments for ${a} ${r}:`,n),t.set(i,{...e.client,completedAppointments:0})}}))),l(Array.from(t.values()))}catch(e){console.error("Error fetching appointments:",e)}finally{o(!1)}},c=a.filter((e=>`${e.firstName} ${e.lastName}`.toLowerCase().includes(t.toLowerCase())));return(0,d.jsxs)("div",{className:"rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1",children:[(0,d.jsx)("h1",{className:"text-xl font-semibold dark:text-white text-blue-900 mb-4",children:"Klient\xebt"}),(0,d.jsx)("div",{className:"max-w-full overflow-x-auto",children:i?(0,d.jsx)("div",{children:"Loading..."}):(0,d.jsxs)("table",{className:"w-full table-auto dark:border-strokedark dark:bg-boxdark",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{className:"bg-gray-200 text-left",children:[(0,d.jsx)("th",{className:"py-4 px-4 text-blue-900 dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Emri dhe Mbiemri"}),(0,d.jsx)("th",{className:"py-4 px-4 text-blue-900 dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Numri i Telefonit"}),(0,d.jsx)("th",{className:"py-4 px-4 text-blue-900 dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Email"}),(0,d.jsx)("th",{className:"py-4 px-4 text-blue-900 dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Terminet e Kryera"})]})}),(0,d.jsx)("tbody",{children:c.length>0?c.map((e=>(0,d.jsxs)("tr",{children:[" ",(0,d.jsxs)("td",{className:"py-4 px-4 dark:text-white text-black",children:[e.firstName," ",e.lastName]}),(0,d.jsx)("td",{className:"py-4 px-4 dark:text-white text-black",children:e.phoneNumber}),(0,d.jsx)("td",{className:"py-4 px-4 dark:text-white text-black",children:e.email}),(0,d.jsx)("td",{className:"py-4 px-4 dark:text-white text-black text-center",children:e.completedAppointments})]},e.email))):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:4,className:"py-4 px-4 text-center",children:"No clients found"})})})]})})]})}}}]);
//# sourceMappingURL=514.1e8a74eb.chunk.js.map