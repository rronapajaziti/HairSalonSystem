"use strict";(self.webpackChunktailadmin_react_free=self.webpackChunktailadmin_react_free||[]).push([[916],{535:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var r=a(43),d=a(213),s=a(369),n=a(149),l=a(579);const i=e=>{let{searchQuery:t}=e;const[a,i]=(0,r.useState)([]),[o,x]=(0,r.useState)((new Date).toISOString().slice(0,7)),[m,c]=(0,r.useState)(0),[p,b]=(0,r.useState)(!1),[h,u]=(0,r.useState)(null),[k,j]=(0,r.useState)({name:"",amount:""}),[y,g]=(0,r.useState)({id:null,name:"",amount:"",date:""});(0,r.useEffect)((()=>{w()}),[o]);const w=async()=>{const[e,t]=o.split("-");try{const a=await d.A.get("https://api.studio-linda.com/api/monthlyexpenses",{params:{year:e,month:t}});i(a.data.expenses||[]),c(a.data.totalCost||0)}catch(a){console.error("Error fetching monthly expenses:",a)}},f=async e=>{e.preventDefault();try{const e={id:y.id,name:y.name,amount:parseFloat(y.amount),date:y.date},t=await d.A.put(`https://api.studio-linda.com/api/monthlyexpenses/${y.id}`,e);i((a=>a.map((a=>a.id===e.id?t.data:a)))),u(null),w()}catch(t){console.error("Error editing monthly expense:",t)}},N=a.filter((e=>e.name.toLowerCase().includes(t.toLowerCase())));return(0,l.jsxs)("div",{className:"rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h1",{className:"text-xl font-semibold text-blue-900 dark:text-white",children:"Shpenzimet Mujore"}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"month",value:o,onChange:e=>x(e.target.value),className:"px-4 py-2 border rounded-md mr-4 text-black dark:text-white  dark:border-strokedark dark:bg-boxdark"}),(0,l.jsx)("button",{onClick:()=>b(!p),className:"px-4 py-2 bg-blue-600 text-white rounded-md",children:p?"X":"Shto Shpenzimin"})]})]}),p&&(0,l.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e={name:k.name,amount:parseFloat(k.amount),date:`${o}-01`},t=await d.A.post("https://api.studio-linda.com/api/monthlyexpenses",e);i((e=>[...e,t.data])),j({name:"",amount:""}),b(!1),w()}catch(t){console.error("Error adding monthly expense:",t)}},className:"mb-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 ",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Emri i Shpenzimit"}),(0,l.jsx)("input",{type:"text",name:"name",value:k.name,onChange:e=>j({...k,name:e.target.value}),className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"\xc7mimi (\u20ac)"}),(0,l.jsx)("input",{type:"number",name:"amount",value:k.amount,onChange:e=>j({...k,amount:e.target.value}),className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark",required:!0})]})]}),(0,l.jsx)("button",{type:"submit",className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-md",children:"Shto"})]}),(0,l.jsxs)("table",{className:"w-full table-auto border-collapse text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-gray-200",children:[(0,l.jsx)("th",{className:"py-2 px-4 text-left text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Emri i Shpenzimit"}),(0,l.jsx)("th",{className:"py-2 px-4 text-left text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"\xc7mimi (\u20ac)"}),(0,l.jsx)("th",{className:"py-2 px-4 text-left text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Data"}),(0,l.jsx)("th",{className:"py-2 px-4 text-left text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Veprimet"})]})}),(0,l.jsx)("tbody",{children:N.map((e=>(0,l.jsxs)(r.Fragment,{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.name}),(0,l.jsxs)("td",{children:[e.amount.toFixed(2),"\u20ac"]}),(0,l.jsx)("td",{children:new Date(e.date).toLocaleDateString()}),(0,l.jsx)("td",{className:"py-4 px-4",children:(0,l.jsxs)("div",{className:"flex space-x-2 sm:justify-center",children:[(0,l.jsx)("button",{onClick:()=>(e=>{h===e.id?u(null):(u(e.id),g({id:e.id,name:e.name,amount:e.amount,date:e.date}))})(e),className:"bg-blue-500 text-white rounded-md px-4 py-2 text-base sm:px-4 sm:py-2 sm:text-sm",children:(0,l.jsx)(s.uO9,{})}),(0,l.jsx)("button",{onClick:()=>(async e=>{try{await d.A.delete(`https://api.studio-linda.com/api/monthlyexpenses/${e}`),i((t=>t.filter((t=>t.id!==e)))),w()}catch(t){console.error("Error deleting monthly expense:",t)}})(e.id),className:"bg-red-500 text-white rounded-md px-4 py-2 text-base sm:px-4 sm:py-2 sm:text-sm",children:(0,l.jsx)(n.pS_,{})})]})})]}),h===e.id&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:4,children:(0,l.jsxs)("form",{onSubmit:f,className:"py-4 px-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Emri i Shpenzimit"}),(0,l.jsx)("input",{type:"text",name:"name",value:y.name,onChange:e=>g({...y,name:e.target.value}),className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"\xc7mimi (\u20ac)"}),(0,l.jsx)("input",{type:"number",name:"amount",value:y.amount,onChange:e=>g({...y,amount:e.target.value}),className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark",required:!0})]})]}),(0,l.jsx)("button",{type:"submit",className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-md",children:"Ruaj"})]})})})]},e.id)))}),(0,l.jsx)("tfoot",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-4 px-6 font-bold",children:"Totali"}),(0,l.jsxs)("td",{className:"py-2 px-4 font-bold",children:[m.toFixed(2),"\u20ac"]}),(0,l.jsx)("td",{colSpan:2})]})})]})]})}}}]);
//# sourceMappingURL=916.f56ddd7d.chunk.js.map