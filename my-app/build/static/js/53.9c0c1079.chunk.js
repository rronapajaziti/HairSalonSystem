"use strict";(self.webpackChunktailadmin_react_free=self.webpackChunktailadmin_react_free||[]).push([[53],{53:(e,r,t)=>{t.r(r),t.d(r,{default:()=>o});var a=t(43),d=t(213),s=t(579);const o=e=>{let{searchQuery:r}=e;const[t,o]=(0,a.useState)([]),[i,n]=(0,a.useState)((new Date).toISOString().split("T")[0]),[l,c]=(0,a.useState)([]),[x,b]=(0,a.useState)(["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30"]);(0,a.useEffect)((()=>{m(),k()}),[i]);const m=async()=>{try{const e=(await d.A.get(`https://api.studio-linda.com/api/Appointment/schedule?date=${i}`)).data.appointments||[];o(e);const r=e.map((e=>new Date(e.appointmentDate).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}).slice(0,5)));b((e=>{const t=[...e,...r];return Array.from(new Set(t)).sort()}))}catch(e){console.error("Error fetching appointments:",e)}},k=async()=>{try{const e=await d.A.get("https://api.studio-linda.com/api/Service");console.log("Full API Response:",e.data);const r=Array.isArray(e.data)?e.data:[];console.log("Fetched Services:",r),c(r)}catch(e){console.error("Error fetching services:",e),c([])}},h=(e,r)=>t.filter((t=>new Date(t.appointmentDate).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}).slice(0,5)===e&&t.serviceName===r)),p=e=>t.filter((r=>r.serviceName===e.serviceName&&"p\xebrfunduar"===r.status.toLowerCase())).reduce(((r,t)=>{const a=parseFloat(e.staffEarningPercentage)||0;return r+(parseFloat(t.price)||0)*(1-a/100)}),0);t.filter((e=>{const t=e.clientName.toLowerCase().includes(r.toLowerCase()),a=e.staffName.toLowerCase().includes(r.toLowerCase());return t||a}));return(0,s.jsxs)("div",{className:"max-w-6xl mx-auto p-4 bg-white shadow-lg rounded-lg text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:[(0,s.jsxs)("h2",{className:"text-2xl font-semibold mb-4 text-blue-700 dark:text-white dark:border-strokedark dark:bg-boxdark",children:["Orari Ditor p\xebr ",new Date(i).toLocaleDateString("sq-AL")]}),(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)("label",{className:"mr-2 font-medium text-gray-700 dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Zgjidh Dat\xebn:"}),(0,s.jsx)("input",{type:"date",value:i,onChange:e=>n(e.target.value),className:"border px-2 py-1 rounded shadow-sm text-black dark:text-white dark:border-strokedark dark:bg-boxdark"})]}),(0,s.jsx)("div",{className:"overflow-x-auto text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:(0,s.jsxs)("table",{className:"min-w-full border-collapse border border-gray-300 dark:text-white dark:border-strokedark dark:bg-boxdark",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"border border-gray-300 px-4 py-2 bg-gray-200 text-left text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Ora"}),l.map(((e,r)=>(0,s.jsx)("th",{className:"border border-gray-300 px-4 py-2 bg-gray-200 text-left text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:e.serviceName},r)))]})}),(0,s.jsxs)("tbody",{children:[x.map(((e,r)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"border border-gray-300 px-4 py-2 font-medium text-gray-700 dark:text-white",children:e}),l.map(((r,t)=>(0,s.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:h(e,r.serviceName).map(((e,r)=>(0,s.jsxs)("div",{className:"text-sm p-1 rounded shadow-md mb-1 "+("p\xebrfunduar"===e.status?"bg-red-400 dark:bg-red-500":"bg-blue-400 dark:bg-blue-700"),children:[(0,s.jsx)("span",{className:"font-medium",children:e.clientName||"Pa Klient"})," ","- ",(0,s.jsx)("span",{children:e.staffName||"Pa Staf"})]},r)))},t)))]},r))),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"border border-gray-300 px-4 py-2 font-medium text-gray-700 dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Totali p\xebr Sh\xebrbim"}),l.map(((e,r)=>(0,s.jsxs)("td",{className:"border border-gray-300 px-4 py-2 font-medium text-green-600",children:[p(e).toFixed(2),"\u20ac"]},r)))]})]}),(0,s.jsx)("tfoot",{children:(0,s.jsx)("tr",{children:(0,s.jsxs)("td",{colSpan:l.length+1,className:"border border-gray-300 px-4 py-2 font-bold text-right text-blue-700",children:["Fitimi i Dit\xebs: ",l.reduce(((e,r)=>e+p(r)),0).toFixed(2),"\u20ac"]})})})]})})]})}}}]);
//# sourceMappingURL=53.9c0c1079.chunk.js.map