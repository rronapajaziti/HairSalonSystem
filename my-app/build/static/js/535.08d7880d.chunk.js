"use strict";(self.webpackChunktailadmin_react_free=self.webpackChunktailadmin_react_free||[]).push([[535],{916:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var s=a(43),l=a(216),r=a(213),o=a(579);const i=()=>{const[e,t]=(0,s.useState)({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),[a,i]=(0,s.useState)([]),[n,d]=(0,s.useState)(!0),[m,c]=(0,s.useState)(""),[h,p]=(0,s.useState)("profile"),u=(0,l.Zp)();(0,s.useEffect)((()=>{const e=localStorage.getItem("token"),a=localStorage.getItem("userId");if(!e||!a)return void u("/",{replace:!0});(async()=>{try{const s=await r.A.get(`https://api.studio-linda.com/api/User/${a}`,{headers:{Authorization:`Bearer ${e}`}});t({firstName:s.data.firstName||"",lastName:s.data.lastName||"",email:s.data.email||"",phone:s.data.phoneNumber||"",password:"",confirmPassword:""}),d(!1)}catch(s){console.error("Error fetching user data:",s),c("Failed to fetch user data."),d(!1)}})()}),[u]);const x=e=>{p(e),"appointments"===e&&(async()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("userId");try{const a=await r.A.get(`https://api.studio-linda.com/api/Appointment/user/${t}`,{headers:{Authorization:`Bearer ${e}`}});i(a.data)}catch(a){console.error("Error fetching appointments:",a),c("Failed to fetch appointments.")}})()},f=a=>{const{name:s,value:l}=a.target;t({...e,[s]:l})};return n?(0,o.jsx)("p",{children:"Loading..."}):(0,o.jsxs)("div",{className:"flex min-h-screen bg-gray-100",children:[(0,o.jsxs)("aside",{className:"w-1/4 bg-white shadow-lg",children:[(0,o.jsx)("div",{className:"text-center py-8",children:(0,o.jsxs)("h2",{className:"text-3xl text-left p-4 font-semibold text-gray-700",children:[e.firstName," ",e.lastName]})}),(0,o.jsxs)("nav",{className:"mt-6 space-y-4 px-4",children:[(0,o.jsx)("button",{onClick:()=>x("profile"),className:"block w-full px-6 py-3 text-left font-medium transition-colors duration-300 rounded-md "+("profile"===h?"bg-blue text-white":"text-gray hover:bg-white hover text-gray"),children:"Profili"}),(0,o.jsx)("button",{onClick:()=>x("appointments"),className:"block w-full px-6 py-3 text-left font-medium transition-colors duration-300 rounded-md "+("appointments"===h?"bg-blue-600 text-white":"text-white hover:bg-white-600 hover:text-white"),children:"Terminet e Mia"}),(0,o.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("userId"),u("/",{replace:!0})},className:"block w-full px-6 py-3 text-left font-medium text-white hover:bg-blue-600 hover:text-white transition-colors duration-300 rounded-md",children:"Dil"})]})]}),(0,o.jsx)("main",{className:"flex-1 p-8",children:"profile"===h?(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg h-1/2",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Profile"}),(0,o.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e.password&&e.password!==e.confirmPassword)alert("Passwords do not match!");else try{const t=localStorage.getItem("token"),a=localStorage.getItem("userId");if(!t||!a)throw new Error("User is not logged in.");const s={userID:parseInt(a,10),firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phone,email:e.email,...e.password&&{passwordHash:e.password}};await r.A.put(`https://api.studio-linda.com/api/User/${a}`,s,{headers:{Authorization:`Bearer ${t}`}});alert("Profile updated successfully!")}catch(o){var a,s,l;console.error("Error updating user data:",(null===(a=o.response)||void 0===a?void 0:a.data)||o.message),alert(`Failed to update profile. Error: ${(null===(s=o.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.message)||o.message}`)}},className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-600",children:"Emri"}),(0,o.jsx)("input",{type:"text",id:"firstName",name:"firstName",value:e.firstName,onChange:f,readOnly:!0,className:"w-full mt-1 px-3 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-600",children:"Mbiemri"}),(0,o.jsx)("input",{type:"text",id:"lastName",name:"lastName",value:e.lastName,readOnly:!0,onChange:f,className:"w-full mt-1 px-3 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-600",children:"Email"}),(0,o.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,readOnly:!0,onChange:f,className:"w-full mt-1 px-3 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-600",children:"Numri i Telefonit"}),(0,o.jsx)("input",{type:"tel",id:"phone",name:"phone",value:e.phone,readOnly:!0,onChange:f,className:"w-full mt-1 px-3 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]})]}):(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Terminet e Mija"}),0===a.length?(0,o.jsx)("p",{className:"text-gray-600",children:"Nuk ka Termine."}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full border-collapse",children:[(0,o.jsx)("thead",{className:"bg-gray-200 text-gray-600",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"py-2 px-4 text-left",children:"Emri i Klientit"}),(0,o.jsx)("th",{className:"py-2 px-4 text-left",children:"Sh\xebrbimi"}),(0,o.jsx)("th",{className:"py-2 px-4 text-left",children:"Data"}),(0,o.jsx)("th",{className:"py-2 px-4 text-left",children:"Statusi"}),(0,o.jsx)("th",{className:"py-2 px-4 text-left",children:"Sh\xebnime"})]})}),(0,o.jsx)("tbody",{children:a.map(((e,t)=>{var a,s;return(0,o.jsxs)("tr",{className:t%2===0?"bg-gray-50":"bg-white",children:[(0,o.jsx)("td",{className:"py-2 px-4",children:`${null===(a=e.client)||void 0===a?void 0:a.firstName} ${null===(s=e.client)||void 0===s?void 0:s.lastName}`}),(0,o.jsx)("td",{className:"py-2 px-4",children:e.serviceName||"No Service"}),(0,o.jsx)("td",{className:"py-2 px-4",children:new Date(e.appointmentDate).toLocaleString()}),(0,o.jsx)("td",{className:"py-2 px-4",children:e.status}),(0,o.jsx)("td",{className:"py-2 px-4",children:e.notes||"No Notes"})]},e.appointmentID)}))})]})})]})})]})}}}]);
//# sourceMappingURL=535.08d7880d.chunk.js.map