"use strict";(self.webpackChunktailadmin_react_free=self.webpackChunktailadmin_react_free||[]).push([[178],{178:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var r=a(43),d=a(213),s=a(579);const i=()=>{const[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)([]),[c,l]=(0,r.useState)([]),[x,k]=(0,r.useState)((new Date).toISOString().split("T")[0]);(0,r.useEffect)((()=>{o(),n(),b();const e=()=>{console.log("Data update detected, refreshing ServiceStaff data..."),o(),n(),b()};return window.addEventListener("dataUpdated",e),()=>{window.removeEventListener("dataUpdated",e)}}),[]);const o=async()=>{try{const e=await d.A.get("https://api.studio-linda.com/api/ServiceStaff");t(e.data)}catch(e){console.error("Error fetching service staff data:",e)}},n=async()=>{try{const e=await d.A.get("https://api.studio-linda.com/api/ServiceStaff/daily-earnings");i(e.data)}catch(e){console.error("Error fetching daily earnings:",e)}},h=e.filter((e=>new Date(e.dateCompleted).toISOString().split("T")[0]===x)),b=async()=>{try{const e=await d.A.get("https://api.studio-linda.com/api/ServiceDiscount");l(e.data)}catch(e){console.error("Error fetching discounts:",e)}},p=a.filter((e=>new Date(Date.UTC(e.year,e.month-1,e.day)).toISOString().split("T")[0]===x));return(0,s.jsxs)("div",{className:"rounded-sm border border-stroke text-black bg-white px-5 pt-6 pb-2.5 shadow-default sm:px-7.5 xl:pb-1 dark:text-white dark:border-strokedark dark:bg-boxdark",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)("label",{className:"mr-4 text-black dark:text-white",children:"Filtro sipas dat\xebs:"}),(0,s.jsx)("input",{type:"date",value:x,onChange:e=>k(e.target.value),className:"px-4 py-2 border rounded-md text-black dark:text-white dark:border-strokedark dark:bg-boxdark"})]})," ",(0,s.jsx)("h1",{className:"text-xl font-semibold text-blue-900 dark:text-white ",children:"Pagesa sipas Sh\xebrbimit"}),(0,s.jsx)("div",{className:"overflow-x-auto mt-6",children:(0,s.jsxs)("table",{className:"w-full text-left border-collapse text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-200",children:[(0,s.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Emri i Pun\xebtores"}),(0,s.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Sh\xebrbimi"}),(0,s.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"\xc7mimi i Sh\xebrbimit"}),(0,s.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"P\xebrqindja"}),(0,s.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Pagesa p\xebr sh\xebrbim"}),(0,s.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Data e p\xebrfundimit"})]})}),(0,s.jsx)("tbody",{children:h.map((e=>{const t=parseFloat(((e,t)=>{const a=new Date,r=c.find((e=>e.serviceID===t&&new Date(e.startDate)<=a&&new Date(e.endDate)>=a));return r?(e-e*r.discountPercentage/100).toFixed(2):e.toFixed(2)})(e.servicePrice,e.serviceID)),a=t*e.percentage/100;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:e.staffName}),(0,s.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:e.serviceName}),(0,s.jsxs)("td",{className:"py-2 px-4 text-black dark:text-white",children:[t.toFixed(2),"\u20ac"]}),(0,s.jsxs)("td",{className:"py-2 px-4 text-black dark:text-white",children:[e.percentage.toFixed(2),"%"]}),(0,s.jsxs)("td",{className:"py-2 px-4 text-black dark:text-white",children:[a.toFixed(2),"\u20ac"]}),(0,s.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:e.dateCompleted?new Date(e.dateCompleted).toLocaleString():"N/A"})]},e.serviceStaffID)}))})]})}),(0,s.jsxs)("div",{className:"mt-10",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-blue-900 dark:text-white ",children:"Pagesat Ditore"}),(0,s.jsx)("div",{className:"overflow-x-auto mt-6",children:(0,s.jsxs)("table",{className:"w-full text-left border-collapse text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-200",children:[(0,s.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Emri i Pun\xebtores"}),(0,s.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Dita"}),(0,s.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Muaji"}),(0,s.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Viti"}),(0,s.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Totali"})]})}),(0,s.jsx)("tbody",{children:p.map((e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:e.staffName}),(0,s.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:e.day}),(0,s.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:new Date(e.year,e.month-1).toLocaleString("sq",{month:"long"})}),(0,s.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:e.year}),(0,s.jsxs)("td",{className:"py-2 px-4 text-black dark:text-white",children:[e.totalEarnings.toFixed(2),"\u20ac"]})]},`${e.staffID}-${e.year}-${e.month}-${e.day}`)))})]})})]})]})}}}]);
//# sourceMappingURL=178.0fecfa98.chunk.js.map