"use strict";(self.webpackChunktailadmin_react_free=self.webpackChunktailadmin_react_free||[]).push([[178],{178:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var r=a(43),d=a(213),s=a(149),i=a(420),l=a(579);const o=()=>{const[e,t]=(0,r.useState)([]),[a,o]=(0,r.useState)([]),[c,x]=(0,r.useState)([]),[n,k]=(0,r.useState)((new Date).toISOString().split("T")[0]);(0,r.useEffect)((()=>{h(),b(),p();const e=()=>{h(),b(),p()};return window.addEventListener("dataUpdated",e),()=>{window.removeEventListener("dataUpdated",e)}}),[n]);const h=async()=>{try{const e=localStorage.getItem("adminToken");if(!e)throw new Error("No token found");const a=(0,i.s)(e),r=a.RolesID||a.roleID,s=localStorage.getItem("userId");if(!s)return void console.error("UserID not found in localStorage!");const l=await d.A.get("https://api.studio-linda.com/api/ServiceStaff",{params:{roleID:r,userID:s},headers:{Authorization:`Bearer ${e}`}});t(l.data)}catch(e){console.error("Error fetching service staff data:",e)}},b=async()=>{try{const e=localStorage.getItem("adminToken");if(!e)throw new Error("No token found");const t=(0,i.s)(e),a=t.RolesID||t.roleID,r=localStorage.getItem("userId"),s=await d.A.get("https://api.studio-linda.com/api/ServiceStaff/daily-earnings",{params:{roleID:a,userID:r},headers:{Authorization:`Bearer ${e}`}});o(3==a||"3"==a?s.data.filter((e=>String(e.userID)===r)):s.data)}catch(e){console.error("Error fetching daily earnings:",e)}},p=async()=>{try{const e=await d.A.get("https://api.studio-linda.com/api/ServiceDiscount");x(e.data)}catch(e){console.error("Error fetching discounts:",e)}},m=e.filter((e=>{if(!e.dateCompleted)return!1;return new Date(e.dateCompleted).toISOString().split("T")[0]===n})),w=a.filter((e=>new Date(Date.UTC(e.year,e.month-1,e.day)).toISOString().split("T")[0]===n));return(0,l.jsxs)("div",{className:"rounded-sm border border-stroke text-black bg-white px-5 pt-6 pb-2.5 shadow-default sm:px-7.5 xl:pb-1 dark:text-white dark:border-strokedark dark:bg-boxdark",children:[(0,l.jsxs)("div",{className:"flex items-center mb-4",children:[(0,l.jsx)("label",{className:"mr-4 text-black dark:text-white",children:"Filtro sipas dat\xebs:"}),(0,l.jsx)("input",{type:"date",value:n,onChange:e=>k(e.target.value),className:"px-4 py-2 border rounded-md text-black dark:text-white dark:border-strokedark dark:bg-boxdark"})]})," ",(0,l.jsx)("h1",{className:"text-xl font-semibold text-blue-900 dark:text-white ",children:"Pagesa sipas Sh\xebrbimit"}),(0,l.jsx)("div",{className:"overflow-x-auto mt-6",children:(0,l.jsxs)("table",{className:"w-full text-left border-collapse text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-gray-200",children:[(0,l.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Emri i Pun\xebtores"}),(0,l.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Sh\xebrbimi"}),(0,l.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"\xc7mimi i Sh\xebrbimit"}),(0,l.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"P\xebrqindja"}),(0,l.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Pagesa p\xebr sh\xebrbim"}),(0,l.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Data e p\xebrfundimit"}),(0,l.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Veprime"})]})}),(0,l.jsx)("tbody",{children:m.map((e=>{var t;const a=parseFloat(((e,t)=>{const a=new Date,r=c.find((e=>e.serviceID===t&&new Date(e.startDate)<=a&&new Date(e.endDate)>=a));return r?(e-e*r.discountPercentage/100).toFixed(2):e.toFixed(2)})(e.servicePrice,e.serviceID)),r=a*e.percentage/100;return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:e.staffName||"N/A"}),(0,l.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:e.serviceName||"N/A"}),(0,l.jsxs)("td",{className:"py-2 px-4 text-black dark:text-white",children:[a.toFixed(2),"\u20ac"]}),(0,l.jsxs)("td",{className:"py-2 px-4 text-black dark:text-white",children:[(null===(t=e.percentage)||void 0===t?void 0:t.toFixed(2))||"0.00","%"]}),(0,l.jsxs)("td",{className:"py-2 px-4 text-black dark:text-white",children:[r.toFixed(2),"\u20ac"]}),(0,l.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:e.dateCompleted?new Date(e.dateCompleted).toLocaleString():"N/A"}),(0,l.jsx)("td",{children:(0,l.jsx)("button",{onClick:()=>(async e=>{try{await d.A.delete(`https://api.studio-linda.com/api/ServiceStaff/${e}`),await h()}catch(t){console.error("Error deleting ServiceStaff record:",t)}})(e.serviceStaffID),className:"bg-red-500 text-white rounded-md px-4 py-2 text-base sm:px-4 sm:py-2 sm:text-sm",children:(0,l.jsx)(s.pS_,{})})})]},e.serviceStaffID)}))})]})}),(0,l.jsxs)("div",{className:"mt-10",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-blue-900 dark:text-white ",children:"Pagesat Ditore"}),(0,l.jsx)("div",{className:"overflow-x-auto mt-6",children:(0,l.jsxs)("table",{className:"w-full text-left border-collapse text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-gray-200",children:[(0,l.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Emri i Pun\xebtores"}),(0,l.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Dita"}),(0,l.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Muaji"}),(0,l.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Viti"}),(0,l.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Totali"})]})}),(0,l.jsx)("tbody",{children:w.map((e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:e.staffName}),(0,l.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:e.day}),(0,l.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:new Date(e.year,e.month-1).toLocaleString("sq",{month:"long"})}),(0,l.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:e.year}),(0,l.jsxs)("td",{className:"py-2 px-4 text-black dark:text-white",children:[e.totalEarnings.toFixed(2),"\u20ac"]})]},`${e.staffID}-${e.year}-${e.month}-${e.day}`)))})]})})]})]})}}}]);
//# sourceMappingURL=178.2e242816.chunk.js.map