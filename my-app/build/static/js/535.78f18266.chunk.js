"use strict";(self.webpackChunktailadmin_react_free=self.webpackChunktailadmin_react_free||[]).push([[535],{916:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var r=a(43),s=a(216),d=a(213),l=a(579);const o=()=>{const[e,t]=(0,r.useState)({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),[a,o]=(0,r.useState)([]),[i,n]=(0,r.useState)(!0),[c,k]=(0,r.useState)(""),[x,m]=(0,r.useState)("profile"),[b,h]=(0,r.useState)(0),u=(0,s.Zp)();(0,r.useEffect)((()=>{const e=localStorage.getItem("token"),a=localStorage.getItem("userId");if(!e||!a)return void u("/",{replace:!0});(async()=>{try{const r=await d.A.get(`https://api.studio-linda.com/api/User/${a}`,{headers:{Authorization:`Bearer ${e}`}});t({firstName:r.data.firstName||"",lastName:r.data.lastName||"",email:r.data.email||"",phone:r.data.phoneNumber||"",password:"",confirmPassword:""}),n(!1)}catch(r){console.error("Error fetching user data:",r),k("Failed to fetch user data."),n(!1)}})()}),[u]),(0,r.useEffect)((()=>{(async()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("userId");try{const a=await d.A.get(`https://api.studio-linda.com/api/Appointment/user/${t}`,{headers:{Authorization:`Bearer ${e}`}});o(a.data)}catch(a){console.error("Error fetching appointments:",a),k("Failed to fetch appointments.")}})()}),[b]);const p=e=>{m(e),"appointments"===e&&h((e=>e+1))},g=a=>{const{name:r,value:s}=a.target;t({...e,[r]:s})};return i?(0,l.jsx)("p",{children:"Loading..."}):(0,l.jsxs)("div",{className:"flex min-h-screen bg-gray-100",children:[(0,l.jsxs)("aside",{className:"w-1/4 bg-white shadow-lg text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:[(0,l.jsx)("div",{className:"text-center py-8",children:(0,l.jsxs)("h2",{className:"text-3xl text-left p-4 font-semibold text-gray-700 dark:text-white",children:[e.firstName," ",e.lastName]})}),(0,l.jsxs)("nav",{className:"mt-6 space-y-4 px-4",children:[(0,l.jsx)("button",{onClick:()=>p("profile"),className:"block w-full px-6 py-3 text-left font-medium transition-colors duration-300 rounded-md "+("profile"===x?"bg-blue text-white dark:bg-blue-900":"text-gray hover:bg-white hover text-gray dark:bg-blue-900"),children:"Profili"}),(0,l.jsx)("button",{onClick:()=>p("appointments"),className:"block w-full px-6 py-3 text-left font-medium transition-colors duration-300 rounded-md "+("appointments"===x?"bg-blue-600 text-white dark:bg-blue-900":"text-white hover:bg-white-600 hover:text-white dark:bg-blue-900"),children:"Terminet e Mia"}),(0,l.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("userId"),u("/",{replace:!0})},className:"block w-full dark:bg-blue-900 px-6 py-3 text-left font-medium text-white hover:bg-blue-600 hover:text-white transition-colors duration-300 rounded-md",children:"Dil"})]})]}),(0,l.jsx)("main",{className:"flex-1 p-8 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"profile"===x?(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg h-1/2 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-6 dark:text-white",children:"Profile"}),(0,l.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e.password&&e.password!==e.confirmPassword)alert("Passwords do not match!");else try{const t=localStorage.getItem("token"),a=localStorage.getItem("userId");if(!t||!a)throw new Error("User is not logged in.");const r={userID:parseInt(a,10),firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phone,email:e.email,...e.password&&{passwordHash:e.password}};await d.A.put(`https://api.studio-linda.com/api/User/${a}`,r,{headers:{Authorization:`Bearer ${t}`}});alert("Profile updated successfully!")}catch(l){var a,r,s;console.error("Error updating user data:",(null===(a=l.response)||void 0===a?void 0:a.data)||l.message),alert(`Failed to update profile. Error: ${(null===(r=l.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||l.message}`)}},className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-600 dark:text-white",children:"Emri"}),(0,l.jsx)("input",{type:"text",id:"firstName",name:"firstName",value:e.firstName,onChange:g,readOnly:!0,className:"w-full mt-1 px-3 py-2 border rounded-md  text-black  shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:text-white dark:border-strokedark dark:bg-boxdark"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-600  dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Mbiemri"}),(0,l.jsx)("input",{type:"text",id:"lastName",name:"lastName",value:e.lastName,readOnly:!0,onChange:g,className:"w-full mt-1 px-3 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-black dark:text-white dark:border-strokedark dark:bg-boxdark"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-600 dark:text-white",children:"Email"}),(0,l.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,readOnly:!0,onChange:g,className:"w-full mt-1 px-3 py-2 border rounded-md  text-black shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:text-white dark:border-strokedark dark:bg-boxdark"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-600 dark:text-white",children:"Numri i Telefonit"}),(0,l.jsx)("input",{type:"tel",id:"phone",name:"phone",value:e.phone,readOnly:!0,onChange:g,className:"w-full mt-1 px-3 py-2 border rounded-md  text-black shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:text-white dark:border-strokedark dark:bg-boxdark"})]})]})]}):(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-6 dark:text-white text-blue-900",children:"Terminet e Mija"}),0===a.length?(0,l.jsx)("p",{className:"text-gray-600",children:"Nuk ka Termine."}):(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full border-collapse text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:[(0,l.jsx)("thead",{className:"bg-gray-200 text-gray-600",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"py-2 px-4 text-lefttext-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Emri i Klientit"}),(0,l.jsx)("th",{className:"py-2 px-4 text-left text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Sh\xebrbimi"}),(0,l.jsx)("th",{className:"py-2 px-4 text-left text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Data"}),(0,l.jsx)("th",{className:"py-2 px-4 text-left text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Statusi"}),(0,l.jsx)("th",{className:"py-2 px-4 text-left text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Sh\xebnime"})]})}),(0,l.jsx)("tbody",{children:a.map(((e,t)=>{var a,r;return(0,l.jsxs)("tr",{className:t%2===0?"bg-gray-50":"bg-white",children:[(0,l.jsx)("td",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:`${null===(a=e.client)||void 0===a?void 0:a.firstName} ${null===(r=e.client)||void 0===r?void 0:r.lastName}`}),(0,l.jsx)("td",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:e.serviceName||"No Service"}),(0,l.jsx)("td",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:new Date(e.appointmentDate).toLocaleString()}),(0,l.jsx)("td",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:e.status}),(0,l.jsx)("td",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:e.notes||"No Notes"})]},e.appointmentID)}))})]})})]})})]})}}}]);
//# sourceMappingURL=535.78f18266.chunk.js.map