"use strict";(self.webpackChunktailadmin_react_free=self.webpackChunktailadmin_react_free||[]).push([[649],{649:(e,a,t)=>{t.r(a),t.d(a,{default:()=>n});var r=t(43),d=t(213),s=t(369),i=t(149),l=t(579);const n=()=>{const[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)([]),[o,k]=(0,r.useState)([]),[m,c]=(0,r.useState)((new Date).toISOString().split("T")[0]),[x,b]=(0,r.useState)(!1),[p,u]=(0,r.useState)(null),[h,N]=(0,r.useState)({appointmentID:null,firstName:"",lastName:"",phoneNumber:"",email:"",userID:"",serviceID:"",appointmentDate:"",status:"pa p\xebrfunduar",notes:""}),[v,f]=(0,r.useState)({appointmentID:null,firstName:"",lastName:"",phoneNumber:"",email:"",userID:"",serviceID:"",appointmentDate:"",status:"pa p\xebrfunduar",notes:""});(0,r.useEffect)((()=>{g(),j(),w()}),[]);const g=async()=>{try{const e=await d.A.get("https://api.studio-linda.com/api/Appointment");a(e.data)}catch(e){console.error("Error fetching appointments:",e)}},j=async()=>{try{const e=await d.A.get("https://api.studio-linda.com/api/Service"),a=Array.isArray(e.data)?e.data:[];console.log("Fetched Services:",a),n(a)}catch(e){console.error("Error fetching services:",e),n([])}},w=async()=>{try{const e=await d.A.get("https://api.studio-linda.com/api/User/staff");console.log("Fetched Staff:",e.data),k(e.data)}catch(e){console.error("Error fetching staff:",e),k([])}},D=e=>{const{name:a,value:t}=e.target;N({...h,[a]:t})},y=e=>{const{name:a,value:t}=e.target;f({...v,[a]:t})},I=async e=>{e.preventDefault();const t={client:{firstName:v.firstName,lastName:v.lastName,phoneNumber:v.phoneNumber,email:v.email},appointmentID:v.appointmentID,userID:v.userID,serviceID:Number(v.serviceID),appointmentDate:v.appointmentDate,status:v.status,notes:v.notes};console.log("Sending payload to backend:",t);try{const e=await d.A.put(`https://api.studio-linda.com/api/Appointment/${v.appointmentID}`,t);console.log("Response from backend:",e.data),a((a=>a.map((a=>a.appointmentID===e.data.appointmentID?{...a,...e.data}:a)))),u(null),f({appointmentID:null,firstName:"",lastName:"",phoneNumber:"",email:"",userID:"",serviceID:"",appointmentDate:"",status:"pa p\xebrfunduar",notes:""}),console.log("Appointment updated successfully.")}catch(r){console.error("Error while editing appointment:",r)}},S=e.filter((e=>!e.appointmentDate||isNaN(new Date(e.appointmentDate).getTime())?(console.warn(`Invalid appointment date for ID: ${e.appointmentID}`),!1):new Date(e.appointmentDate).toISOString().split("T")[0]===m));return(0,l.jsxs)("div",{className:"rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default sm:px-7.5 xl:pb-1 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h1",{className:"text-xl font-semibold text-blue-900 dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Terminet"}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"date",value:m,onChange:e=>c(e.target.value),className:"px-4 py-2 border rounded-md mr-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark"}),(0,l.jsx)("button",{onClick:()=>b(!x),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md",children:x?"X":"Shto Terminin"})]})]}),x&&(0,l.jsxs)("form",{onSubmit:async t=>{t.preventDefault();const r={client:{firstName:h.firstName,lastName:h.lastName,phoneNumber:h.phoneNumber,email:h.email},appointmentID:h.appointmentID||0,userID:h.userID,serviceID:h.serviceID,appointmentDate:h.appointmentDate,status:h.status,notes:h.notes};console.log("Payload being sent to the backend:",r);try{const t=await d.A.post("https://api.studio-linda.com/api/Appointment",r);a([...e,t.data]),b(!1),N({appointmentID:null,firstName:"",lastName:"",phoneNumber:"",email:"",userID:"",serviceID:"",appointmentDate:"",status:"pa p\xebrfunduar",notes:""})}catch(i){var s;console.error("Error adding appointment:",(null===(s=i.response)||void 0===s?void 0:s.data)||i.message)}},className:"mt-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 ",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Emri i Klientit"}),(0,l.jsx)("input",{type:"text",name:"firstName",value:h.firstName,onChange:D,className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Mbiemri i Klientit"}),(0,l.jsx)("input",{type:"text",name:"lastName",value:h.lastName,onChange:D,className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Numri i Klientit"}),(0,l.jsx)("input",{type:"text",name:"phoneNumber",value:h.phoneNumber,onChange:D,className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Email i Klientit"}),(0,l.jsx)("input",{type:"email",name:"email",value:h.email,onChange:D,className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Sh\xebrbimi"}),(0,l.jsxs)("select",{name:"serviceID",value:h.serviceID,onChange:D,className:"px-4 py-2 border rounded-md w-full",required:!0,children:[(0,l.jsx)("option",{value:"",children:"Zgjedh Sh\xebrbimin"}),t.map((e=>(0,l.jsx)("option",{value:e.serviceID,children:e.serviceName},e.serviceID)))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Stafi"}),(0,l.jsxs)("select",{name:"userID",value:h.userID,onChange:D,className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark",required:!0,children:[(0,l.jsx)("option",{value:"",children:"Zgjedh Stafin"}),o.map((e=>(0,l.jsxs)("option",{value:e.userID,children:[e.firstName," ",e.lastName]},e.userID)))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Data e Terminit"}),(0,l.jsx)("input",{type:"datetime-local",name:"appointmentDate",value:h.appointmentDate,onChange:D,className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Statusi i Terminit"}),(0,l.jsxs)("select",{name:"status",value:h.status,onChange:D,className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark",required:!0,children:[(0,l.jsx)("option",{value:"pa p\xebrfunduar",children:"Pa P\xebrfunduar"}),(0,l.jsx)("option",{value:"p\xebrfunduar",children:"P\xebrfunduar"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Sh\xebnime"}),(0,l.jsx)("textarea",{name:"notes",value:h.notes,onChange:D,className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark"})]})]}),(0,l.jsx)("button",{type:"submit",className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-md",children:"Shto Terminin"})]}),(0,l.jsx)("div",{className:"max-w-full overflow-x-auto mt-6 ",children:(0,l.jsxs)("table",{className:"w-full table-auto text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:[(0,l.jsx)("thead",{className:"bg-gray-200 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"py-3 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Klienti"}),(0,l.jsx)("th",{className:"py-3 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Numri i Klientit"}),(0,l.jsx)("th",{className:"py-3 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Email i Klientit"}),(0,l.jsx)("th",{className:"py-3 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Sh\xebrbimi"}),(0,l.jsx)("th",{className:"py-3 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Stafi"}),(0,l.jsx)("th",{className:"py-3 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Data"}),(0,l.jsx)("th",{className:"py-3 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Statusi"}),(0,l.jsx)("th",{className:"py-3 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Sh\xebnimet"}),(0,l.jsx)("th",{className:"py-3 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Veptimet"})]})}),(0,l.jsx)("tbody",{children:S.map((e=>{var n,k,m,c;return(0,l.jsxs)(r.Fragment,{children:[(0,l.jsxs)("tr",{children:[(0,l.jsxs)("td",{className:"py-3 px-4 ",children:[null===(n=e.client)||void 0===n?void 0:n.firstName," ",null===(k=e.client)||void 0===k?void 0:k.lastName]}),(0,l.jsx)("td",{className:"py-3 px-4",children:null===(m=e.client)||void 0===m?void 0:m.phoneNumber}),(0,l.jsx)("td",{className:"py-3 px-4",children:null===(c=e.client)||void 0===c?void 0:c.email}),(0,l.jsx)("td",{className:"py-3 px-4",children:e.serviceName}),(0,l.jsx)("td",{className:"py-3 px-4",children:e.staffName||"No Staff"}),(0,l.jsx)("td",{className:"py-3 px-4",children:new Date(e.appointmentDate).toLocaleString()}),(0,l.jsx)("td",{className:"py-3 px-4",children:e.status}),(0,l.jsx)("td",{className:"py-3 px-4",children:e.notes}),(0,l.jsx)("td",{className:"py-4 px-4",children:(0,l.jsxs)("div",{className:"flex space-x-2 sm:justify-center",children:[(0,l.jsx)("button",{onClick:()=>(e=>{if(p===e.appointmentID){var a,r,d,s;u(null),f({appointmentID:e.appointmentID,firstName:(null===(a=e.client)||void 0===a?void 0:a.firstName)||"",lastName:(null===(r=e.client)||void 0===r?void 0:r.lastName)||"",phoneNumber:(null===(d=e.client)||void 0===d?void 0:d.phoneNumber)||"",email:(null===(s=e.client)||void 0===s?void 0:s.email)||"",userID:e.userID||"",serviceID:e.serviceID||"",appointmentDate:e.appointmentDate||"",status:e.status||"pa p\xebrfunduar",notes:e.notes||""})}else{var i,l,n,k;const a=t.find((a=>a.serviceName===e.serviceName)),r=o.find((a=>`${a.firstName} ${a.lastName}`===e.staffName)),d=e.appointmentDate&&!isNaN(new Date(e.appointmentDate).getTime());u(e.appointmentID),f({appointmentID:e.appointmentID,firstName:(null===(i=e.client)||void 0===i?void 0:i.firstName)||"",lastName:(null===(l=e.client)||void 0===l?void 0:l.lastName)||"",phoneNumber:(null===(n=e.client)||void 0===n?void 0:n.phoneNumber)||"",email:(null===(k=e.client)||void 0===k?void 0:k.email)||"",serviceID:(null===a||void 0===a?void 0:a.serviceID)||"",userID:(null===r||void 0===r?void 0:r.userID)||"",appointmentDate:d?new Date(e.appointmentDate).toISOString().slice(0,16):"",status:e.status||"pa p\xebrfunduar",notes:e.notes||""}),console.log("Submit appointment:",e)}})(e),className:"bg-blue-500 text-white rounded-md px-4 py-2 text-base sm:px-4 sm:py-2 sm:text-sm",children:(0,l.jsx)(s.uO9,{})}),(0,l.jsx)("button",{onClick:()=>(async e=>{try{await d.A.delete(`https://api.studio-linda.com/api/Appointment/${e}`),a((a=>a.filter((a=>a.appointmentID!==e))))}catch(t){console.error("Error deleting appointment:",t)}})(e.appointmentID),className:"bg-red-500 text-white rounded-md px-4 py-2 text-base sm:px-4 sm:py-2 sm:text-sm",children:(0,l.jsx)(i.pS_,{})})]})})]}),p===e.appointmentID&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:9,className:"py-4 px-4 bg-gray-100 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:(0,l.jsxs)("form",{onSubmit:I,children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Emri i Klientit"}),(0,l.jsx)("input",{type:"text",name:"firstName",value:v.firstName,onChange:y,className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Mbiemri i Klientit"}),(0,l.jsx)("input",{type:"text",name:"lastName",value:v.lastName,onChange:y,className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Numri i Klientit"}),(0,l.jsx)("input",{type:"text",name:"phoneNumber",value:v.phoneNumber,onChange:y,className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Email i Klientit"}),(0,l.jsx)("input",{type:"email",name:"email",value:v.email,onChange:y,className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Sh\xebrbimi"}),(0,l.jsxs)("select",{name:"serviceID",value:v.serviceID||"",onChange:y,className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark",required:!0,children:[(0,l.jsx)("option",{value:"",children:"Zhgjedh Sh\xebrbimin"}),t.map((e=>(0,l.jsx)("option",{value:e.serviceID,children:e.serviceName},e.serviceID)))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Stafi"}),(0,l.jsxs)("select",{name:"userID",value:v.userID||"",onChange:y,className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark",required:!0,children:[(0,l.jsx)("option",{value:"",children:"Zgjedh Stafin"}),o.map((e=>(0,l.jsxs)("option",{value:e.userID,children:[e.firstName," ",e.lastName]},e.userID)))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Data e Terminit"}),(0,l.jsx)("input",{type:"datetime-local",name:"appointmentDate",value:v.appointmentDate,onChange:y,className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Statusi"}),(0,l.jsxs)("select",{name:"status",value:v.status,onChange:y,className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark",required:!0,children:[(0,l.jsx)("option",{value:"pa p\xebrfunduar",children:"Pa P\xebrfunduar"}),(0,l.jsx)("option",{value:"p\xebrfunduar",children:"P\xebrfunduar"})]})]}),(0,l.jsxs)("div",{className:"col-span-2",children:[(0,l.jsx)("label",{className:"block font-medium text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Sh\xebnimet"}),(0,l.jsx)("textarea",{name:"notes",value:v.notes,onChange:y,className:"px-4 py-2 border rounded-md w-full text-black dark:text-white dark:border-strokedark dark:bg-boxdark"})]})]}),(0,l.jsx)("button",{type:"submit",className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-md",children:"Ruaj"})]})})})]},e.appointmentID)}))})]})})]})}}}]);
//# sourceMappingURL=649.8c9b4e86.chunk.js.map