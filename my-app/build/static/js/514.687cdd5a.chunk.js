"use strict";(self.webpackChunktailadmin_react_free=self.webpackChunktailadmin_react_free||[]).push([[514],{514:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var r=a(43),s=a(213),d=a(579);const l=e=>{let{searchQuery:t}=e;const[a,l]=(0,r.useState)([]),[i,n]=(0,r.useState)(!0);(0,r.useEffect)((()=>{o()}),[]);const o=async()=>{n(!0);try{const e=(await s.A.get("https://api.studio-linda.com/api/Appointment")).data,t=await Promise.all(e.map((async e=>{const{firstName:t,lastName:a,phoneNumber:r,email:d}=e.client;try{var l;const i=(null===(l=(await s.A.get(`https://api.studio-linda.com/api/appointment/completed-appointments-client?firstName=${t}&lastName=${a}&phoneNumber=${r}&email=${d}`)).data)||void 0===l?void 0:l.completedAppointments)||0;return{...e.client,completedAppointments:i}}catch(i){return console.error(`Error fetching completed appointments for ${t} ${a}:`,i),{...e.client,completedAppointments:0}}})));l(t)}catch(e){console.error("Error fetching appointments:",e)}finally{n(!1)}},c=a.filter((e=>`${e.firstName} ${e.lastName}`.toLowerCase().includes(t.toLowerCase())));return(0,d.jsxs)("div",{className:"rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1",children:[(0,d.jsx)("h1",{className:"text-xl font-semibold dark:text-white text-blue-900 mb-4",children:"Klient\xebt"}),(0,d.jsx)("div",{className:"max-w-full overflow-x-auto",children:i?(0,d.jsx)("div",{children:"Loading..."}):(0,d.jsxs)("table",{className:"w-full table-auto dark:border-strokedark dark:bg-boxdark",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{className:"bg-gray-200 text-left",children:[(0,d.jsx)("th",{className:"py-4 px-4 text-blue-900 dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Emri dhe Mbiemri"}),(0,d.jsx)("th",{className:"py-4 px-4 text-blue-900 dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Numri i Telefonit"}),(0,d.jsx)("th",{className:"py-4 px-4 text-blue-900 dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Email"}),(0,d.jsx)("th",{className:"py-4 px-4 text-blue-900 dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Terminet e Kryera"})]})}),(0,d.jsx)("tbody",{children:c.length>0?c.map((e=>(0,d.jsxs)("tr",{children:[" ",(0,d.jsxs)("td",{className:"py-4 px-4 dark:text-white text-black",children:[e.firstName," ",e.lastName]}),(0,d.jsx)("td",{className:"py-4 px-4 dark:text-white text-black",children:e.phoneNumber}),(0,d.jsx)("td",{className:"py-4 px-4 dark:text-white text-black",children:e.email}),(0,d.jsx)("td",{className:"py-4 px-4 dark:text-white text-black text-center",children:e.completedAppointments})]},e.email))):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:4,className:"py-4 px-4 text-center",children:"No clients found"})})})]})})]})}}}]);
//# sourceMappingURL=514.687cdd5a.chunk.js.map