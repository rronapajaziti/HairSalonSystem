"use strict";(self.webpackChunktailadmin_react_free=self.webpackChunktailadmin_react_free||[]).push([[178],{178:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var r=a(43),d=a(213),s=a(149),i=a(579);const c=()=>{const[e,t]=(0,r.useState)([]),[a,c]=(0,r.useState)([]),[l,x]=(0,r.useState)([]),[k,o]=(0,r.useState)((new Date).toISOString().split("T")[0]);(0,r.useEffect)((()=>{n(),h(),p();const e=()=>{n(),h(),p()};return window.addEventListener("dataUpdated",e),()=>{window.removeEventListener("dataUpdated",e)}}),[]);const n=async()=>{try{const e=await d.A.get("https://api.studio-linda.com/api/ServiceStaff");t(e.data)}catch(e){console.error("Error fetching service staff data:",e)}},h=async()=>{try{const e=await d.A.get("https://api.studio-linda.com/api/ServiceStaff/daily-earnings");c(e.data)}catch(e){console.error("Error fetching daily earnings:",e)}},b=e.filter((e=>new Date(e.dateCompleted).toISOString().split("T")[0]===k)),p=async()=>{try{const e=await d.A.get("https://api.studio-linda.com/api/ServiceDiscount");x(e.data)}catch(e){console.error("Error fetching discounts:",e)}},m=a.filter((e=>new Date(Date.UTC(e.year,e.month-1,e.day)).toISOString().split("T")[0]===k));return(0,i.jsxs)("div",{className:"rounded-sm border border-stroke text-black bg-white px-5 pt-6 pb-2.5 shadow-default sm:px-7.5 xl:pb-1 dark:text-white dark:border-strokedark dark:bg-boxdark",children:[(0,i.jsxs)("div",{className:"flex items-center mb-4",children:[(0,i.jsx)("label",{className:"mr-4 text-black dark:text-white",children:"Filtro sipas dat\xebs:"}),(0,i.jsx)("input",{type:"date",value:k,onChange:e=>o(e.target.value),className:"px-4 py-2 border rounded-md text-black dark:text-white dark:border-strokedark dark:bg-boxdark"})]})," ",(0,i.jsx)("h1",{className:"text-xl font-semibold text-blue-900 dark:text-white ",children:"Pagesa sipas Sh\xebrbimit"}),(0,i.jsx)("div",{className:"overflow-x-auto mt-6",children:(0,i.jsxs)("table",{className:"w-full text-left border-collapse text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"bg-gray-200",children:[(0,i.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Emri i Pun\xebtores"}),(0,i.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Sh\xebrbimi"}),(0,i.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"\xc7mimi i Sh\xebrbimit"}),(0,i.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"P\xebrqindja"}),(0,i.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Pagesa p\xebr sh\xebrbim"}),(0,i.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Data e p\xebrfundimit"}),(0,i.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Veprime"})]})}),(0,i.jsx)("tbody",{children:b.map((e=>{const t=parseFloat(((e,t)=>{const a=new Date,r=l.find((e=>e.serviceID===t&&new Date(e.startDate)<=a&&new Date(e.endDate)>=a));return r?(e-e*r.discountPercentage/100).toFixed(2):e.toFixed(2)})(e.servicePrice,e.serviceID)),a=t*e.percentage/100;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:e.staffName}),(0,i.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:e.serviceName}),(0,i.jsxs)("td",{className:"py-2 px-4 text-black dark:text-white",children:[t.toFixed(2),"\u20ac"]}),(0,i.jsxs)("td",{className:"py-2 px-4 text-black dark:text-white",children:[e.percentage.toFixed(2),"%"]}),(0,i.jsxs)("td",{className:"py-2 px-4 text-black dark:text-white",children:[a.toFixed(2),"\u20ac"]}),(0,i.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:e.dateCompleted?new Date(e.dateCompleted).toLocaleString():"N/A"}),(0,i.jsx)("td",{children:(0,i.jsx)("button",{onClick:()=>(async e=>{try{await d.A.delete(`https://api.studio-linda.com/api/ServiceStaff/${e}`),await n()}catch(t){console.error("Error deleting ServiceStaff record:",t)}})(e.serviceStaffID),className:"bg-red-500 text-white rounded-md px-4 py-2 text-base sm:px-4 sm:py-2 sm:text-sm",children:(0,i.jsx)(s.pS_,{})})})]},e.serviceStaffID)}))})]})}),(0,i.jsxs)("div",{className:"mt-10",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-blue-900 dark:text-white ",children:"Pagesat Ditore"}),(0,i.jsx)("div",{className:"overflow-x-auto mt-6",children:(0,i.jsxs)("table",{className:"w-full text-left border-collapse text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"bg-gray-200",children:[(0,i.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Emri i Pun\xebtores"}),(0,i.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Dita"}),(0,i.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Muaji"}),(0,i.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Viti"}),(0,i.jsx)("th",{className:"py-2 px-4 text-black dark:text-white dark:border-strokedark dark:bg-boxdark",children:"Totali"})]})}),(0,i.jsx)("tbody",{children:m.map((e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:e.staffName}),(0,i.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:e.day}),(0,i.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:new Date(e.year,e.month-1).toLocaleString("sq",{month:"long"})}),(0,i.jsx)("td",{className:"py-2 px-4 text-black dark:text-white",children:e.year}),(0,i.jsxs)("td",{className:"py-2 px-4 text-black dark:text-white",children:[e.totalEarnings.toFixed(2),"\u20ac"]})]},`${e.staffID}-${e.year}-${e.month}-${e.day}`)))})]})})]})]})}}}]);
//# sourceMappingURL=178.c787811b.chunk.js.map