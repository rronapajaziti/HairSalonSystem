{"version":3,"file":"static/js/535.674fcabf.chunk.js","mappings":"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","sources":["pages/Profile.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport userProfilePic from '../images/user/user-06.png';\r\n\r\nconst Profile = () => {\r\n  const [userInfo, setUserInfo] = useState({\r\n    firstName: '',\r\n    lastName: '',\r\n    email: '',\r\n    phone: '',\r\n    password: '',\r\n    confirmPassword: '',\r\n  });\r\n  const [appointments, setAppointments] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [view, setView] = useState('profile');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    const userId = localStorage.getItem('userId');\r\n\r\n    if (!token || !userId) {\r\n      navigate('/signin'); // Redirect to SignIn if no token or userId\r\n      return;\r\n    }\r\n\r\n    const fetchUserData = async () => {\r\n      try {\r\n        const response = await axios.get(\r\n          `https://api.studio-linda.com/api/User/${userId}`,\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          },\r\n        );\r\n\r\n        setUserInfo({\r\n          firstName: response.data.firstName || '',\r\n          lastName: response.data.lastName || '',\r\n          email: response.data.email || '',\r\n          phone: response.data.phoneNumber || '',\r\n          password: '',\r\n          confirmPassword: '',\r\n        });\r\n\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error('Error fetching user data:', err);\r\n        setError('Failed to fetch user data.');\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchUserData();\r\n  }, [navigate]);\r\n\r\n  const fetchAppointments = async () => {\r\n    const token = localStorage.getItem('token');\r\n    const userId = localStorage.getItem('userId');\r\n\r\n    try {\r\n      const response = await axios.get(\r\n        `https://api.studio-linda.com/api/Appointment/user/${userId}`,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        },\r\n      );\r\n\r\n      setAppointments(response.data);\r\n    } catch (err) {\r\n      console.error('Error fetching appointments:', err);\r\n      setError('Failed to fetch appointments.');\r\n    }\r\n  };\r\n\r\n  const handleViewSwitch = (newView: 'profile' | 'appointments') => {\r\n    setView(newView);\r\n    if (newView === 'appointments') {\r\n      fetchAppointments();\r\n    }\r\n  };\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setUserInfo({\r\n      ...userInfo,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e: any) => {\r\n    e.preventDefault();\r\n\r\n    if (userInfo.password && userInfo.password !== userInfo.confirmPassword) {\r\n      alert('Passwords do not match!');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const userId = localStorage.getItem('userId');\r\n\r\n      if (!token || !userId) {\r\n        throw new Error('User is not logged in.');\r\n      }\r\n\r\n      const payload = {\r\n        userID: parseInt(userId, 10),\r\n        firstName: userInfo.firstName,\r\n        lastName: userInfo.lastName,\r\n        phoneNumber: userInfo.phone,\r\n        email: userInfo.email,\r\n        ...(userInfo.password && { passwordHash: userInfo.password }),\r\n      };\r\n\r\n      const response = await axios.put(\r\n        `https://api.studio-linda.com/api/User/${userId}`,\r\n        payload,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        },\r\n      );\r\n\r\n      alert('Profile updated successfully!');\r\n    } catch (err: any) {\r\n      console.error(\r\n        'Error updating user data:',\r\n        err.response?.data || err.message,\r\n      );\r\n      alert(\r\n        `Failed to update profile. Error: ${err.response?.data?.message || err.message}`,\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('userId');\r\n    navigate('/signin');\r\n  };\r\n\r\n  if (loading) return <p>Loading...</p>;\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen bg-gray-100\">\r\n      {/* Sidebar */}\r\n      <aside className=\"w-1/4 bg-white shadow-lg\">\r\n        <div className=\"text-center py-8\">\r\n          <h2 className=\"text-3xl text-left p-4 font-semibold text-gray-700\">\r\n            {userInfo.firstName} {userInfo.lastName}\r\n          </h2>\r\n        </div>\r\n        <nav className=\"mt-6 space-y-4 px-4\">\r\n          <button\r\n            onClick={() => handleViewSwitch('profile')}\r\n            className={`block w-full px-6 py-3 text-left font-medium transition-colors duration-300 rounded-md ${\r\n              view === 'profile'\r\n                ? 'bg-blue text-white'\r\n                : 'text-gray hover:bg-white hover text-gray'\r\n            }`}\r\n          >\r\n            Profili\r\n          </button>\r\n          <button\r\n            onClick={() => handleViewSwitch('appointments')}\r\n            className={`block w-full px-6 py-3 text-left font-medium transition-colors duration-300 rounded-md ${\r\n              view === 'appointments'\r\n                ? 'bg-blue-600 text-white'\r\n                : 'text-white hover:bg-white-600 hover:text-white'\r\n            }`}\r\n          >\r\n            Terminet e Mia\r\n          </button>\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"block w-full px-6 py-3 text-left font-medium text-white hover:bg-blue-600 hover:text-white transition-colors duration-300 rounded-md\"\r\n          >\r\n            Dil\r\n          </button>\r\n        </nav>\r\n      </aside>\r\n\r\n      {/* Main Content */}\r\n      <main className=\"flex-1 p-8\">\r\n        {view === 'profile' ? (\r\n          <div className=\"bg-white p-6 rounded-lg shadow-lg h-1/2\">\r\n            <h2 className=\"text-xl font-semibold mb-6\">Profile</h2>\r\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n              <div>\r\n                <label\r\n                  htmlFor=\"firstName\"\r\n                  className=\"block text-sm font-medium text-gray-600\"\r\n                >\r\n                  Emri\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"firstName\"\r\n                  name=\"firstName\"\r\n                  value={userInfo.firstName}\r\n                  onChange={handleChange}\r\n                  readOnly\r\n                  className=\"w-full mt-1 px-3 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label\r\n                  htmlFor=\"lastName\"\r\n                  className=\"block text-sm font-medium text-gray-600\"\r\n                >\r\n                  Mbiemri\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"lastName\"\r\n                  name=\"lastName\"\r\n                  value={userInfo.lastName}\r\n                  readOnly\r\n                  onChange={handleChange}\r\n                  className=\"w-full mt-1 px-3 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label\r\n                  htmlFor=\"email\"\r\n                  className=\"block text-sm font-medium text-gray-600\"\r\n                >\r\n                  Email\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  id=\"email\"\r\n                  name=\"email\"\r\n                  value={userInfo.email}\r\n                  readOnly\r\n                  onChange={handleChange}\r\n                  className=\"w-full mt-1 px-3 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label\r\n                  htmlFor=\"phone\"\r\n                  className=\"block text-sm font-medium text-gray-600\"\r\n                >\r\n                  Numri i Telefonit\r\n                </label>\r\n                <input\r\n                  type=\"tel\"\r\n                  id=\"phone\"\r\n                  name=\"phone\"\r\n                  value={userInfo.phone}\r\n                  readOnly\r\n                  onChange={handleChange}\r\n                  className=\"w-full mt-1 px-3 py-2 border rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500\"\r\n                />\r\n              </div>\r\n            </form>\r\n          </div>\r\n        ) : (\r\n          <div className=\"bg-white p-6 rounded-lg shadow-lg\">\r\n            <h2 className=\"text-xl font-semibold mb-6\">Terminet e Mija</h2>\r\n            {appointments.length === 0 ? (\r\n              <p className=\"text-gray-600\">Nuk ka Termine.</p>\r\n            ) : (\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full border-collapse\">\r\n                  <thead className=\"bg-gray-200 text-gray-600\">\r\n                    <tr>\r\n                      <th className=\"py-2 px-4 text-left\">Emri i Klientit</th>\r\n                      <th className=\"py-2 px-4 text-left\">Shërbimi</th>\r\n                      <th className=\"py-2 px-4 text-left\">Data</th>\r\n                      <th className=\"py-2 px-4 text-left\">Statusi</th>\r\n                      <th className=\"py-2 px-4 text-left\">Shënime</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {appointments.map((appointment: any, index) => (\r\n                      <tr\r\n                        key={appointment.appointmentID}\r\n                        className={index % 2 === 0 ? 'bg-gray-50' : 'bg-white'}\r\n                      >\r\n                        <td className=\"py-2 px-4\">{`${appointment.client?.firstName} ${appointment.client?.lastName}`}</td>\r\n                        <td className=\"py-2 px-4\">\r\n                          {appointment.serviceName || 'No Service'}\r\n                        </td>\r\n                        <td className=\"py-2 px-4\">\r\n                          {new Date(\r\n                            appointment.appointmentDate,\r\n                          ).toLocaleString()}\r\n                        </td>\r\n                        <td className=\"py-2 px-4\">{appointment.status}</td>\r\n                        <td className=\"py-2 px-4\">\r\n                          {appointment.notes || 'No Notes'}\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"],"names":["Profile","userInfo","setUserInfo","useState","firstName","lastName","email","phone","password","confirmPassword","appointments","setAppointments","loading","setLoading","error","setError","view","setView","navigate","useNavigate","useEffect","token","localStorage","getItem","userId","async","response","axios","get","headers","Authorization","data","phoneNumber","err","console","fetchUserData","handleViewSwitch","newView","fetchAppointments","handleChange","e","name","value","target","_jsx","children","_jsxs","className","onClick","handleLogout","removeItem","onSubmit","preventDefault","alert","Error","payload","userID","parseInt","passwordHash","put","_err$response","_err$response2","_err$response2$data","message","htmlFor","type","id","onChange","readOnly","length","map","appointment","index","_appointment$client","_appointment$client2","client","serviceName","Date","appointmentDate","toLocaleString","status","notes","appointmentID"],"sourceRoot":""}